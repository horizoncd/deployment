{
  "type": "object",
  "properties": {
    "app": {
      "title": "deployment",
      "type": "object",
      "properties": {
        "spec": {
          "type": "object",
          "title": "spec",
          "properties": {
            {{- if .resourceType }}
            {{- if eq .resourceType "cluster" }}
            "replicas": {
              "type": "integer",
              "title": "replicas",
              "default": 1,
              "minimum": 0,
              "maximum":
              {{- .maxReplicas | default 30 }}
            },
            {{- end }}
            {{- end }}
           "resource": {
              "type": "string",
              "title": "resource",
              "default": "x-small",
              "oneOf": [
                {
                  "enum": [
                    "tiny"
                  ],
                  "title": "tiny(0.5C1G)"
                },
                {
                  "enum": [
                    "x-small"
                  ],
                  "title": "x-small(1C2G)"
                },
                {
                  "enum": [
                    "small"
                  ],
                  "title": "small(2C4G)"
                },
                {
                  "enum": [
                    "middle"
                  ],
                  "title": "middle(4C8G)"
                }
                {{- if .supportMoreSpecs -}}
                {{- if contains "large" .supportMoreSpecs -}},
                {
                  "enum": [
                    "large"
                  ],
                  "title": "large(8C16G)"
                }
                {{- end -}}
                {{- if contains "flexible" .supportMoreSpecs -}},
                {
                  "enum": [
                    "flexible"
                  ],
                  "title": "flexible"
                }
                {{- end -}}
                {{- end -}}
              ]
            }
          },
          "dependencies": {
            "resource": {
              "oneOf": [
                {
                  "properties": {
                    "resource": {
                      "enum": [
                        "flexible"
                      ],
                      "title": "flexible"
                    },
                    "cpu": {
                      "type": "integer",
                      "title": "cpu",
                      "default": 500,
                      "enum": [
                        500,
                        1000,
                        2000,
                        4000,
                        6000,
                        8000
                      ]
                    },
                    "memory": {
                      "type": "integer",
                      "title": "memory",
                      "default": 1024,
                      "enum": [
                        1024,
                        2048,
                        4096,
                        6144,
                        8192,
                        10240,
                        12288,
                        14336,
                        16384
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "resource": {
                      "enum": [
                        "tiny"
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "resource": {
                      "enum": [
                        "x-small"
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "resource": {
                      "enum": [
                        "small"
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "resource": {
                      "enum": [
                        "middle"
                      ]
                    }
                  }
                },
                {
                  "properties": {
                    "resource": {
                      "enum": [
                        "large"
                      ]
                    }
                  }
                }
              ]
            }
          }
        },
        "envs": {
          "type": "array",
          "title": "environment variables",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
